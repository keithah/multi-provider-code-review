---
phase: 05-complete-learning-feedback-loop
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/setup.ts
  - src/core/orchestrator.ts
autonomous: true

must_haves:
  truths:
    - "AcceptanceDetector instantiated in production mode setup"
    - "AcceptanceDetector instantiated in CLI mode setup"
    - "ReviewComponents interface includes acceptanceDetector field"
  artifacts:
    - path: "src/setup.ts"
      provides: "AcceptanceDetector instantiation"
      contains: "new AcceptanceDetector()"
    - path: "src/core/orchestrator.ts"
      provides: "ReviewComponents interface with acceptanceDetector"
      contains: "acceptanceDetector?: AcceptanceDetector"
  key_links:
    - from: "src/setup.ts"
      to: "src/learning/acceptance-detector.ts"
      via: "import and instantiation"
      pattern: "import.*AcceptanceDetector.*from.*learning"
    - from: "src/setup.ts"
      to: "ReviewComponents return"
      via: "includes acceptanceDetector property"
      pattern: "acceptanceDetector,"
---

<objective>
Wire AcceptanceDetector into runtime setup for both production and CLI modes

Purpose: Enable positive feedback tracking by instantiating AcceptanceDetector at application startup, following the exact pattern established in Plan 04-09 for SuppressionTracker and ProviderWeightTracker.

Output: AcceptanceDetector available in ReviewComponents for orchestration layer to consume
</objective>

<execution_context>
@/Users/keith/.claude/get-shit-done/workflows/execute-plan.md
@/Users/keith/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-complete-learning-feedback-loop/05-RESEARCH.md
@src/setup.ts
@src/core/orchestrator.ts
@src/learning/acceptance-detector.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add AcceptanceDetector to ReviewComponents interface</name>
  <files>src/core/orchestrator.ts</files>
  <action>
    Add AcceptanceDetector import and interface field:

    1. Add import at top of file:
       `import { AcceptanceDetector } from '../learning/acceptance-detector';`

    2. Add to ReviewComponents interface (around line 83, after githubClient):
       `acceptanceDetector?: AcceptanceDetector;`

    Keep the field optional (?) since CLI mode may not have full GitHub API access.
  </action>
  <verify>`grep -n "acceptanceDetector" src/core/orchestrator.ts` shows import and interface field</verify>
  <done>ReviewComponents interface includes acceptanceDetector optional field</done>
</task>

<task type="auto">
  <name>Task 2: Wire AcceptanceDetector in production mode (createComponents)</name>
  <files>src/setup.ts</files>
  <action>
    Wire AcceptanceDetector into createComponents() function following the Plan 04-09 pattern:

    1. Add import at top with other learning imports:
       `import { AcceptanceDetector } from './learning/acceptance-detector';`

    2. In createComponents() function, after providerWeightTracker instantiation (around line 245):
       `const acceptanceDetector = new AcceptanceDetector();`

    3. Add to the return object (around line 314, after githubClient):
       `acceptanceDetector,`

    This follows the exact pattern used for SuppressionTracker and ProviderWeightTracker in Plan 04-09.
  </action>
  <verify>`grep -n "AcceptanceDetector" src/setup.ts` shows import, instantiation, and return</verify>
  <done>AcceptanceDetector instantiated and returned in production mode setup</done>
</task>

<task type="auto">
  <name>Task 3: Wire AcceptanceDetector in CLI mode (createComponentsForCLI)</name>
  <files>src/setup.ts</files>
  <action>
    Wire AcceptanceDetector into createComponentsForCLI() function:

    1. After providerWeightTracker instantiation (around line 116):
       `const acceptanceDetector = new AcceptanceDetector();`

    2. Add to the return object (around line 196):
       `acceptanceDetector,`

    This ensures CLI mode has acceptance detection capability for local testing.
  </action>
  <verify>`npm run build` passes without errors</verify>
  <done>AcceptanceDetector instantiated and returned in CLI mode setup, build passes</done>
</task>

</tasks>

<verification>
1. `npm run build` - TypeScript compiles without errors
2. `grep -n "AcceptanceDetector" src/setup.ts` - Shows import, two instantiations (createComponents, createComponentsForCLI), and two returns
3. `grep -n "acceptanceDetector" src/core/orchestrator.ts` - Shows import and interface field
</verification>

<success_criteria>
- AcceptanceDetector imported and instantiated in both createComponents() and createComponentsForCLI()
- ReviewComponents interface includes `acceptanceDetector?: AcceptanceDetector` field
- TypeScript build passes
- No runtime errors in existing tests
</success_criteria>

<output>
After completion, create `.planning/phases/05-complete-learning-feedback-loop/05-01-SUMMARY.md`
</output>
